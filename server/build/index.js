"use strict";var helpers=require("./lib/helpers"),express=require("express"),bodyParser=require("body-parser");require("./lib/dbConnection").connect(function(a,b){if(a)return void console.log("Could not connect to db: "+a);b=b.db("asig");var c={users:b.collection("users"),cerere:b.collection("cerere"),dauna:b.collection("dauna"),service:b.collection("service")},d=express();d.use(bodyParser.urlencoded({extended:!0})),d.use(bodyParser.json()),d.all(function(a,b,c){b.setHeader("Content-Type","application/json")});var e=[require("./services/angular"),require("./services/Polite").getRouter(c),require("./services/Daune").getRouter(c),require("./services/Roluri").getRouter(c),require("./services/ServiceAuto").getRouter(c),require("./services/upload").getRouter(c),require("./services/User").getRouter(c)];for(var f in e)d.use(e[f]);d.use(function(a,b){b.send("No page here, check the url")}),d.listen(process.env.PORT)}),process.on("uncaughtException",function(a){console.log("Uncaught exception:"),console.log(a)});